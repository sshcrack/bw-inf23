<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.13">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2. Aufgabe: Verzinkt</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-a126389619fad6dbfb296a5315d49fef.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-2de20cb76464c514fcd56ce40d6195d3.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-runde" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">1. Runde</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-runde">    
        <li>
    <a class="dropdown-item" href="../../runde_1/aufgabe_1/index.html">
 <span class="dropdown-text">1. Aufgabe</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../runde_1/aufgabe_2/index.html">
 <span class="dropdown-text">2. Aufgabe</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhalt</h2>
   
  <ul>
  <li><a href="#unser-ansatz-simulation-von-kristallwachstum" id="toc-unser-ansatz-simulation-von-kristallwachstum" class="nav-link active" data-scroll-target="#unser-ansatz-simulation-von-kristallwachstum">Unser Ansatz: Simulation von Kristallwachstum</a>
  <ul class="collapse">
  <li><a href="#die-hauptschritte-des-algorithmus" id="toc-die-hauptschritte-des-algorithmus" class="nav-link" data-scroll-target="#die-hauptschritte-des-algorithmus">Die Hauptschritte des Algorithmus:</a></li>
  </ul></li>
  <li><a href="#implementierung-der-lösung" id="toc-implementierung-der-lösung" class="nav-link" data-scroll-target="#implementierung-der-lösung">Implementierung der Lösung</a></li>
  <li><a href="#interaktive-visualisierung" id="toc-interaktive-visualisierung" class="nav-link" data-scroll-target="#interaktive-visualisierung">Interaktive Visualisierung</a></li>
  <li><a href="#diskussion-des-ansatzes" id="toc-diskussion-des-ansatzes" class="nav-link" data-scroll-target="#diskussion-des-ansatzes">Diskussion des Ansatzes</a>
  <ul class="collapse">
  <li><a href="#mögliche-erweiterungen" id="toc-mögliche-erweiterungen" class="nav-link" data-scroll-target="#mögliche-erweiterungen">Mögliche Erweiterungen</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2. Aufgabe: Verzinkt</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Die Aufgabe
</div>
</div>
<div class="callout-body-container callout-body">
<div class="columns" data-column-gap="2em">
<div class="column" style="width:70%;">
<p>Muster wie im Bild unten sieht man an feuerverzinkten Metallen, zum Beispiel an den Masten von Laternen oder Ampeln. Diese Muster entstehen, indem sich beim Erkalten des flüssigen Zinks, von zufällig vorhandenen Kristallisationskeimen aus, Kristalle bilden. Jeder Keim hat eine bestimmte Orientierung. Um ihn herum wächst ein Kristall mit der gleichen Orientierung, bis er auf andere Kristalle trifft. Kristalle unterschiedlicher Orientierung reflektieren das Licht unterschiedlich und erscheinen so unterschiedlich hell.</p>
</div><div class="column" style="width:30%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://upload.wikimedia.org/wikipedia/commons/c/c4/Feuerverzinkte_Oberfl%C3%A4che.jpg" class="img-fluid figure-img"></p>
<figcaption>Feuerverzinktes Metall</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<section id="unser-ansatz-simulation-von-kristallwachstum" class="level2">
<h2 class="anchored" data-anchor-id="unser-ansatz-simulation-von-kristallwachstum">Unser Ansatz: Simulation von Kristallwachstum</h2>
<p>Um die einzigartigen Muster zu simulieren, die bei der Feuerverzinkung entstehen, verwenden wir einen Algorithmus, der das natürliche Wachstum von Kristallen nachahmt:</p>
<ol type="1">
<li><strong>Zufällige Keimbildung</strong>: Wir starten mit einigen zufällig platzierten Kristallisationskeimen.</li>
<li><strong>Gerichtetes Wachstum</strong>: Jeder Kristall wächst in eine zufällige Richtung mit einer Farbe.</li>
<li><strong>Konkurrenz um Raum</strong>: Kristalle wachsen, bis sie auf andere Kristalle treffen und dann stoppen.</li>
<li><strong>Gewichtete Ausbreitung</strong>: Die Wachstumsrichtung kann durch Parameter gesteuert werden, um verschiedene Muster zu erzeugen.</li>
</ol>
<section id="die-hauptschritte-des-algorithmus" class="level3">
<h3 class="anchored" data-anchor-id="die-hauptschritte-des-algorithmus">Die Hauptschritte des Algorithmus:</h3>
<ol type="1">
<li><strong>Initialisierung</strong>: Platzieren einer konfigurierbaren Anzahl von Kristallisationskeimen mit zufälligen Positionen und Orientierungen.</li>
<li><strong>Wachstum</strong>: Iteratives Ausbreiten der Kristalle in verschiedene Richtungen mit gewichteten Wahrscheinlichkeiten.</li>
<li><strong>Rendering</strong>: Visualisierung der Kristalle auf einem Canvas, wobei verschiedene Orientierungen durch unterschiedliche Farben dargestellt werden.</li>
</ol>
</section>
</section>
<section id="implementierung-der-lösung" class="level2">
<h2 class="anchored" data-anchor-id="implementierung-der-lösung">Implementierung der Lösung</h2>
<p>Unsere Implementierung verwendet ObservableJS, um eine interaktive Visualisierung zu erstellen. Der Kern des Algorithmus ist eine Funktion, die das Kristallwachstum simuliert:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Kristallwachstums-Simulation - Kernalgorithmus</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">crystalGrowth</span>(parameters) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 1. Initialisierung der Kristallisationskeime</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 2. Wachstumsschleife mit gewichteten Richtungen</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 3. Rendering auf Canvas</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Die Simulation verwendet folgende Schlüsselkonzepte:</p>
<ul>
<li><strong>Gewichtete Richtungen</strong>: Jede der acht möglichen Wachstumsrichtungen (links, rechts, oben, unten und diagonal) kann individuell gewichtet werden.</li>
<li><strong>Zufällige Kristallbildung</strong>: Neue Kristalle können während der Simulation mit einer kleinen Wahrscheinlichkeit entstehen.</li>
<li><strong>Effiziente Datenstrukturen</strong>: Für die Verfolgung besetzter Positionen und aktiver Wachstumspunkte werden optimierte Datenstrukturen verwendet.</li>
</ul>
</section>
<section id="interaktive-visualisierung" class="level2">
<h2 class="anchored" data-anchor-id="interaktive-visualisierung">Interaktive Visualisierung</h2>
<div id="exercise-fig" class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2" data-startfrom="66" data-source-offset="-55"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 65;"><span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>viewof wNegX <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Left"</span>})</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>viewof wNegY <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.4</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Down"</span>})</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>viewof wPosX <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Right"</span>})</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>viewof wPosY <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Up"</span>})</span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>viewof wNegXNegY <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Top-Left"</span>})</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>viewof wNegXPosY <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Bottom-Left"</span>})</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>viewof wPosXNegY <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Top-Right"</span>})</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a>viewof wPosXPosY <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.01</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Weight Bottom-Right"</span>})</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>viewof startCrystals <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">200</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">50</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Starting Crystals"</span>})</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>viewof pNewCrystal <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="fl">0.01</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.0001</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">0.001</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"New Crystal Probability"</span>})</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>viewof canvasSize <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">64</span><span class="op">,</span> <span class="dv">512</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">64</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">256</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Canvas Size"</span>})</span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a><span class="co">// Helper functions for coordinate conversion</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">coordsToIndex</span>(x<span class="op">,</span> y<span class="op">,</span> width) {</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> y <span class="op">*</span> width <span class="op">+</span> x<span class="op">;</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">indexToCoords</span>(index<span class="op">,</span> width) {</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> index <span class="op">%</span> width<span class="op">,</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(index <span class="op">/</span> width)</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a><span class="co">// Initialize crystal simulation data structures</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">initializeSimulation</span>(width<span class="op">,</span> height<span class="op">,</span> startCrystals) {</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialize data array with nulls</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="bu">Array</span>(width <span class="op">*</span> height)<span class="op">.</span><span class="fu">fill</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Use a Set to track occupied positions for faster lookups</span></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> occupiedPositions <span class="op">=</span> <span class="kw">new</span> <span class="bu">Set</span>()<span class="op">;</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> growingPoints <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create initial crystals</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> startCrystals<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> x<span class="op">,</span> y<span class="op">,</span> index<span class="op">;</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Ensure we don't place crystals on already occupied positions</span></span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">do</span> {</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> width)<span class="op">;</span></span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> height)<span class="op">;</span></span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>        index <span class="op">=</span> <span class="fu">coordsToIndex</span>(x<span class="op">,</span> y<span class="op">,</span> width)<span class="op">;</span></span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">while</span> (occupiedPositions<span class="op">.</span><span class="fu">has</span>(index))<span class="op">;</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> color <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> <span class="dv">255</span><span class="op">;</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> crystal <span class="op">=</span> { x<span class="op">,</span> y<span class="op">,</span> color }<span class="op">;</span></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>        data[index] <span class="op">=</span> crystal<span class="op">;</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>        occupiedPositions<span class="op">.</span><span class="fu">add</span>(index)<span class="op">;</span></span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>        growingPoints<span class="op">.</span><span class="fu">push</span>(crystal)<span class="op">;</span></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> { data<span class="op">,</span> occupiedPositions<span class="op">,</span> growingPoints }<span class="op">;</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a><span class="co">// Create direction vectors with weights</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">createDirections</span>(wNegX<span class="op">,</span> wNegY<span class="op">,</span> wPosX<span class="op">,</span> wPosY<span class="op">,</span> wNegXNegY<span class="op">,</span> wNegXPosY<span class="op">,</span> wPosXNegY<span class="op">,</span> wPosXPosY) {</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wNegX }<span class="op">,</span>    <span class="co">// left</span></span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wPosX }<span class="op">,</span>     <span class="co">// right</span></span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wPosY }<span class="op">,</span>    <span class="co">// up</span></span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wNegY }<span class="op">,</span>     <span class="co">// down</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wNegXNegY }<span class="op">,</span> <span class="co">// top-left</span></span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wNegXPosY }<span class="op">,</span>  <span class="co">// bottom-left</span></span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wPosXNegY }<span class="op">,</span>  <span class="co">// top-right</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>        { <span class="dt">dx</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">dy</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">w</span><span class="op">:</span> wPosXPosY }    <span class="co">// bottom-right</span></span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a><span class="co">// Attempt to create a new random crystal</span></span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">tryCreateRandomCrystal</span>(data<span class="op">,</span> occupiedPositions<span class="op">,</span> queue<span class="op">,</span> width<span class="op">,</span> height) {</span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">100</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Randomly select a position</span></span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> randomIndex <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> data<span class="op">.</span><span class="at">length</span>)<span class="op">;</span></span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (occupiedPositions<span class="op">.</span><span class="fu">has</span>(randomIndex)) <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> { <span class="dt">x</span><span class="op">:</span> nX<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> nY } <span class="op">=</span> <span class="fu">indexToCoords</span>(randomIndex<span class="op">,</span> width)<span class="op">;</span></span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> newCrystal <span class="op">=</span> {</span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>        <span class="dt">color</span><span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">*</span> <span class="dv">255</span><span class="op">,</span></span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>        <span class="dt">x</span><span class="op">:</span> nX<span class="op">,</span></span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>        <span class="dt">y</span><span class="op">:</span> nY</span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>        }<span class="op">;</span></span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Update data structure</span></span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> index <span class="op">=</span> <span class="fu">coordsToIndex</span>(nX<span class="op">,</span> nY<span class="op">,</span> width)<span class="op">;</span></span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>        data[index] <span class="op">=</span> newCrystal<span class="op">;</span></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>        occupiedPositions<span class="op">.</span><span class="fu">add</span>(index)<span class="op">;</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>        queue<span class="op">.</span><span class="fu">push</span>(newCrystal)<span class="op">;</span></span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a><span class="co">// Process one crystal's growth</span></span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">processCrystalGrowth</span>(crystal<span class="op">,</span> directions<span class="op">,</span> data<span class="op">,</span> occupiedPositions<span class="op">,</span> queue<span class="op">,</span> width<span class="op">,</span> height) {</span>
<span id="cb2-164"><a href="#cb2-164" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { x<span class="op">,</span> y<span class="op">,</span> color } <span class="op">=</span> crystal<span class="op">;</span></span>
<span id="cb2-165"><a href="#cb2-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-166"><a href="#cb2-166" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Shuffle directions once per crystal</span></span>
<span id="cb2-167"><a href="#cb2-167" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> shuffledDirs <span class="op">=</span> [<span class="op">...</span>directions]<span class="op">.</span><span class="fu">sort</span>(() <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">-</span> <span class="fl">0.5</span>)<span class="op">;</span></span>
<span id="cb2-168"><a href="#cb2-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-169"><a href="#cb2-169" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> hasFound <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-170"><a href="#cb2-170" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> hasSkipped <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> { dx<span class="op">,</span> dy<span class="op">,</span> w } <span class="kw">of</span> shuffledDirs) {</span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> nX <span class="op">=</span> x <span class="op">+</span> dx<span class="op">;</span></span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> nY <span class="op">=</span> y <span class="op">+</span> dy<span class="op">;</span></span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Boundary check</span></span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (nX <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">||</span> nX <span class="op">&gt;=</span> width <span class="op">||</span> nY <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">||</span> nY <span class="op">&gt;=</span> height) {</span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-180"><a href="#cb2-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-181"><a href="#cb2-181" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> index <span class="op">=</span> <span class="fu">coordsToIndex</span>(nX<span class="op">,</span> nY<span class="op">,</span> width)<span class="op">;</span></span>
<span id="cb2-182"><a href="#cb2-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-183"><a href="#cb2-183" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Check if position is already occupied</span></span>
<span id="cb2-184"><a href="#cb2-184" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (occupiedPositions<span class="op">.</span><span class="fu">has</span>(index)) {</span>
<span id="cb2-185"><a href="#cb2-185" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb2-186"><a href="#cb2-186" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-187"><a href="#cb2-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-188"><a href="#cb2-188" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">&gt;</span> w) {</span>
<span id="cb2-189"><a href="#cb2-189" aria-hidden="true" tabindex="-1"></a>        hasSkipped <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-190"><a href="#cb2-190" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb2-191"><a href="#cb2-191" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-192"><a href="#cb2-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-193"><a href="#cb2-193" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Create new crystal</span></span>
<span id="cb2-194"><a href="#cb2-194" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> newCrystal <span class="op">=</span> { <span class="dt">x</span><span class="op">:</span> nX<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> nY<span class="op">,</span> color }<span class="op">;</span></span>
<span id="cb2-195"><a href="#cb2-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-196"><a href="#cb2-196" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Update data structures</span></span>
<span id="cb2-197"><a href="#cb2-197" aria-hidden="true" tabindex="-1"></a>        data[index] <span class="op">=</span> newCrystal<span class="op">;</span></span>
<span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a>        occupiedPositions<span class="op">.</span><span class="fu">add</span>(index)<span class="op">;</span></span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a>        queue<span class="op">.</span><span class="fu">push</span>(crystal)<span class="op">;</span>    <span class="co">// Add original crystal back to queue</span></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a>        queue<span class="op">.</span><span class="fu">push</span>(newCrystal)<span class="op">;</span> <span class="co">// Add new crystal to queue</span></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a>        hasFound <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> { hasFound<span class="op">,</span> hasSkipped }<span class="op">;</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a><span class="co">// Render crystal data to canvas</span></span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">renderCrystals</span>(data<span class="op">,</span> occupiedPositions<span class="op">,</span> width<span class="op">,</span> height) {</span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> canvas <span class="op">=</span> DOM<span class="op">.</span><span class="fu">canvas</span>(width<span class="op">,</span> height)<span class="op">;</span></span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> ctx <span class="op">=</span> canvas<span class="op">.</span><span class="fu">getContext</span>(<span class="st">"2d"</span>)<span class="op">;</span></span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create image data</span></span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> imgData <span class="op">=</span> ctx<span class="op">.</span><span class="fu">createImageData</span>(width<span class="op">,</span> height)<span class="op">;</span></span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> buffer <span class="op">=</span> imgData<span class="op">.</span><span class="at">data</span><span class="op">;</span></span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Fill with default color first (red for empty spaces)</span></span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> width <span class="op">*</span> height<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> offset <span class="op">=</span> i <span class="op">*</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a>        buffer[offset] <span class="op">=</span> <span class="dv">255</span><span class="op">;</span>     <span class="co">// R</span></span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a>        buffer[offset <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// G</span></span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a>        buffer[offset <span class="op">+</span> <span class="dv">2</span>] <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">// B</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a>        buffer[offset <span class="op">+</span> <span class="dv">3</span>] <span class="op">=</span> <span class="dv">255</span><span class="op">;</span> <span class="co">// A</span></span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Only process occupied positions</span></span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> index <span class="kw">of</span> occupiedPositions) {</span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> crystal <span class="op">=</span> data[index]<span class="op">;</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> color <span class="op">=</span> crystal<span class="op">.</span><span class="at">color</span><span class="op">;</span></span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> shifted <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(<span class="dv">255</span><span class="op">,</span> color <span class="op">+</span> <span class="dv">10</span>)<span class="op">;</span></span>
<span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> offset <span class="op">=</span> index <span class="op">*</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a>        buffer[offset] <span class="op">=</span> color<span class="op">;</span>     <span class="co">// R</span></span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a>        buffer[offset <span class="op">+</span> <span class="dv">1</span>] <span class="op">=</span> shifted<span class="op">;</span> <span class="co">// G</span></span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a>        buffer[offset <span class="op">+</span> <span class="dv">2</span>] <span class="op">=</span> shifted<span class="op">;</span> <span class="co">// B</span></span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Alpha already set to 255</span></span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a>    ctx<span class="op">.</span><span class="fu">putImageData</span>(imgData<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> canvas<span class="op">;</span></span>
<span id="cb2-242"><a href="#cb2-242" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-243"><a href="#cb2-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-244"><a href="#cb2-244" aria-hidden="true" tabindex="-1"></a><span class="co">// Main simulation function</span></span>
<span id="cb2-245"><a href="#cb2-245" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">crystalGrowth</span>(wNegX<span class="op">,</span> wNegY<span class="op">,</span> wPosX<span class="op">,</span> wPosY<span class="op">,</span> wNegXNegY<span class="op">,</span> wNegXPosY<span class="op">,</span> wPosXNegY<span class="op">,</span> wPosXPosY<span class="op">,</span></span>
<span id="cb2-246"><a href="#cb2-246" aria-hidden="true" tabindex="-1"></a>                    startCrystals<span class="op">,</span> pNewCrystal<span class="op">,</span> canvasSize) {</span>
<span id="cb2-247"><a href="#cb2-247" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Canvas dimensions</span></span>
<span id="cb2-248"><a href="#cb2-248" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> width <span class="op">=</span> canvasSize<span class="op">;</span></span>
<span id="cb2-249"><a href="#cb2-249" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> height <span class="op">=</span> canvasSize<span class="op">;</span></span>
<span id="cb2-250"><a href="#cb2-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-251"><a href="#cb2-251" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialize simulation</span></span>
<span id="cb2-252"><a href="#cb2-252" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { data<span class="op">,</span> occupiedPositions<span class="op">,</span> growingPoints } <span class="op">=</span> <span class="fu">initializeSimulation</span>(width<span class="op">,</span> height<span class="op">,</span> startCrystals)<span class="op">;</span></span>
<span id="cb2-253"><a href="#cb2-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-254"><a href="#cb2-254" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create direction vectors</span></span>
<span id="cb2-255"><a href="#cb2-255" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> directions <span class="op">=</span> <span class="fu">createDirections</span>(wNegX<span class="op">,</span> wNegY<span class="op">,</span> wPosX<span class="op">,</span> wPosY<span class="op">,</span> wNegXNegY<span class="op">,</span> wNegXPosY<span class="op">,</span> wPosXNegY<span class="op">,</span> wPosXPosY)<span class="op">;</span></span>
<span id="cb2-256"><a href="#cb2-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-257"><a href="#cb2-257" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Process growing points using a queue</span></span>
<span id="cb2-258"><a href="#cb2-258" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> queue <span class="op">=</span> [<span class="op">...</span>growingPoints]<span class="op">;</span></span>
<span id="cb2-259"><a href="#cb2-259" aria-hidden="true" tabindex="-1"></a>    growingPoints<span class="op">.</span><span class="at">length</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="co">// Clear the original array</span></span>
<span id="cb2-260"><a href="#cb2-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-261"><a href="#cb2-261" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Growth algorithm</span></span>
<span id="cb2-262"><a href="#cb2-262" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> (queue<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">||</span> data<span class="op">.</span><span class="fu">some</span>(crystal <span class="kw">=&gt;</span> crystal <span class="op">===</span> <span class="kw">null</span>)) {</span>
<span id="cb2-263"><a href="#cb2-263" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Try to create a new random crystal</span></span>
<span id="cb2-264"><a href="#cb2-264" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>() <span class="op">&lt;</span> pNewCrystal) {</span>
<span id="cb2-265"><a href="#cb2-265" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="fu">tryCreateRandomCrystal</span>(data<span class="op">,</span> occupiedPositions<span class="op">,</span> queue<span class="op">,</span> width<span class="op">,</span> height)) {</span>
<span id="cb2-266"><a href="#cb2-266" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb2-267"><a href="#cb2-267" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-268"><a href="#cb2-268" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-269"><a href="#cb2-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-270"><a href="#cb2-270" aria-hidden="true" tabindex="-1"></a>        <span class="co">// No more crystals to grow</span></span>
<span id="cb2-271"><a href="#cb2-271" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (queue<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>) <span class="cf">break</span><span class="op">;</span></span>
<span id="cb2-272"><a href="#cb2-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-273"><a href="#cb2-273" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Get next crystal from queue</span></span>
<span id="cb2-274"><a href="#cb2-274" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> crystal <span class="op">=</span> queue<span class="op">.</span><span class="fu">shift</span>()<span class="op">;</span></span>
<span id="cb2-275"><a href="#cb2-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-276"><a href="#cb2-276" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Process this crystal's growth</span></span>
<span id="cb2-277"><a href="#cb2-277" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> { hasFound<span class="op">,</span> hasSkipped } <span class="op">=</span> <span class="fu">processCrystalGrowth</span>(</span>
<span id="cb2-278"><a href="#cb2-278" aria-hidden="true" tabindex="-1"></a>            crystal<span class="op">,</span></span>
<span id="cb2-279"><a href="#cb2-279" aria-hidden="true" tabindex="-1"></a>            directions<span class="op">,</span></span>
<span id="cb2-280"><a href="#cb2-280" aria-hidden="true" tabindex="-1"></a>            data<span class="op">,</span></span>
<span id="cb2-281"><a href="#cb2-281" aria-hidden="true" tabindex="-1"></a>            occupiedPositions<span class="op">,</span></span>
<span id="cb2-282"><a href="#cb2-282" aria-hidden="true" tabindex="-1"></a>            queue<span class="op">,</span></span>
<span id="cb2-283"><a href="#cb2-283" aria-hidden="true" tabindex="-1"></a>            width<span class="op">,</span></span>
<span id="cb2-284"><a href="#cb2-284" aria-hidden="true" tabindex="-1"></a>            height</span>
<span id="cb2-285"><a href="#cb2-285" aria-hidden="true" tabindex="-1"></a>        )<span class="op">;</span></span>
<span id="cb2-286"><a href="#cb2-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-287"><a href="#cb2-287" aria-hidden="true" tabindex="-1"></a>        <span class="co">// If we skipped some directions but didn't grow, give this crystal another chance later</span></span>
<span id="cb2-288"><a href="#cb2-288" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (<span class="op">!</span>hasFound <span class="op">&amp;&amp;</span> hasSkipped) {</span>
<span id="cb2-289"><a href="#cb2-289" aria-hidden="true" tabindex="-1"></a>        queue<span class="op">.</span><span class="fu">push</span>(crystal)<span class="op">;</span></span>
<span id="cb2-290"><a href="#cb2-290" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-291"><a href="#cb2-291" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-292"><a href="#cb2-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-293"><a href="#cb2-293" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Render the result</span></span>
<span id="cb2-294"><a href="#cb2-294" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">renderCrystals</span>(data<span class="op">,</span> occupiedPositions<span class="op">,</span> width<span class="op">,</span> height)<span class="op">;</span></span>
<span id="cb2-295"><a href="#cb2-295" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-296"><a href="#cb2-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-297"><a href="#cb2-297" aria-hidden="true" tabindex="-1"></a><span class="co">// Run the simulation with the current parameter values</span></span>
<span id="cb2-298"><a href="#cb2-298" aria-hidden="true" tabindex="-1"></a><span class="fu">crystalGrowth</span>(wNegX<span class="op">,</span> wNegY<span class="op">,</span> wPosX<span class="op">,</span> wPosY<span class="op">,</span> wNegXNegY<span class="op">,</span> wNegXPosY<span class="op">,</span> wPosXNegY<span class="op">,</span> wPosXPosY<span class="op">,</span></span>
<span id="cb2-299"><a href="#cb2-299" aria-hidden="true" tabindex="-1"></a>    startCrystals<span class="op">,</span> pNewCrystal<span class="op">,</span> canvasSize)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="exercise-fig-1">
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-2">
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-3">
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-4">
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-5">
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-6">
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-7">
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-8">
<div id="ojs-cell-1-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-9">
<div id="ojs-cell-1-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-10">
<div id="ojs-cell-1-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-11">
<div id="ojs-cell-1-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-12">
<div id="ojs-cell-1-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-13">
<div id="ojs-cell-1-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-14">
<div id="ojs-cell-1-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-15">
<div id="ojs-cell-1-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-16">
<div id="ojs-cell-1-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-17">
<div id="ojs-cell-1-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-18">
<div id="ojs-cell-1-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-19">
<div id="ojs-cell-1-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="exercise-fig-20">
<div id="ojs-cell-1-20" data-nodetype="expression">

</div>
</div>
</div>
<p>Generiertes Metall</p>
</div>
</section>
<section id="diskussion-des-ansatzes" class="level2">
<h2 class="anchored" data-anchor-id="diskussion-des-ansatzes">Diskussion des Ansatzes</h2>
<p>Die implementierte Simulation ermöglicht es, die charakteristischen Muster von feuerverzinktem Metall realistisch nachzubilden. Unser Ansatz hat folgende Eigenschaften:</p>
<ol type="1">
<li><strong>Interaktivität</strong>: Durch die Steuerelemente können Benutzer verschiedene Parameter anpassen und unmittelbar die Auswirkungen auf das resultierende Muster beobachten.</li>
<li><strong>Effizienz</strong>: Die Verwendung optimierter Datenstrukturen ermöglicht eine flüssige Simulation auch bei größeren Canvas-Größen.</li>
<li><strong>Realismus</strong>: Die zufällige Keimbildung und das konkurrierende Wachstum der Kristalle ahmen die natürlichen Prozesse nach, die bei der Feuerverzinkung auftreten.</li>
</ol>
<section id="mögliche-erweiterungen" class="level3">
<h3 class="anchored" data-anchor-id="mögliche-erweiterungen">Mögliche Erweiterungen</h3>
<p>Für eine noch realistischere Simulation könnten folgende Aspekte hinzugefügt werden:</p>
<ul>
<li><strong>Temperaturgradienten</strong>: Simulation der Abkühlung des Metalls, die die Kristallbildung beeinflusst</li>
<li><strong>Materialverunreinigungen</strong>: Simulation von Störstellen, die das Wachstumsmuster beeinflussen</li>
<li><strong>3D-Visualisierung</strong>: Erweiterung auf eine dreidimensionale Darstellung für noch realistischere Ergebnisse</li>
<li><strong>Physikalisch basierte Rendering-Techniken</strong>: Verbesserte Darstellung der Lichtreflexionen an den Kristalloberflächen</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IlxuLy8gQ3J5c3RhbCBHcm93dGggU2ltdWxhdGlvbiAtIE9ic2VydmFibGUgSlMgdmVyc2lvblxuXG52aWV3b2Ygd05lZ1ggPSBJbnB1dHMucmFuZ2UoWzAsIDFdLCB7c3RlcDogMC4wMSwgdmFsdWU6IDAuMSwgbGFiZWw6IFwiV2VpZ2h0IExlZnRcIn0pXG52aWV3b2Ygd05lZ1kgPSBJbnB1dHMucmFuZ2UoWzAsIDFdLCB7c3RlcDogMC4wMSwgdmFsdWU6IDAuNCwgbGFiZWw6IFwiV2VpZ2h0IERvd25cIn0pXG52aWV3b2Ygd1Bvc1ggPSBJbnB1dHMucmFuZ2UoWzAsIDFdLCB7c3RlcDogMC4wMSwgdmFsdWU6IDAuMSwgbGFiZWw6IFwiV2VpZ2h0IFJpZ2h0XCJ9KVxudmlld29mIHdQb3NZID0gSW5wdXRzLnJhbmdlKFswLCAxXSwge3N0ZXA6IDAuMDEsIHZhbHVlOiAwLjEsIGxhYmVsOiBcIldlaWdodCBVcFwifSlcblxudmlld29mIHdOZWdYTmVnWSA9IElucHV0cy5yYW5nZShbMCwgMV0sIHtzdGVwOiAwLjAxLCB2YWx1ZTogMC4wNSwgbGFiZWw6IFwiV2VpZ2h0IFRvcC1MZWZ0XCJ9KVxudmlld29mIHdOZWdYUG9zWSA9IElucHV0cy5yYW5nZShbMCwgMV0sIHtzdGVwOiAwLjAxLCB2YWx1ZTogMC4wNSwgbGFiZWw6IFwiV2VpZ2h0IEJvdHRvbS1MZWZ0XCJ9KVxudmlld29mIHdQb3NYTmVnWSA9IElucHV0cy5yYW5nZShbMCwgMV0sIHtzdGVwOiAwLjAxLCB2YWx1ZTogMC4wNSwgbGFiZWw6IFwiV2VpZ2h0IFRvcC1SaWdodFwifSlcbnZpZXdvZiB3UG9zWFBvc1kgPSBJbnB1dHMucmFuZ2UoWzAsIDFdLCB7c3RlcDogMC4wMSwgdmFsdWU6IDAuMDUsIGxhYmVsOiBcIldlaWdodCBCb3R0b20tUmlnaHRcIn0pXG5cbnZpZXdvZiBzdGFydENyeXN0YWxzID0gSW5wdXRzLnJhbmdlKFsxLCAyMDBdLCB7c3RlcDogMSwgdmFsdWU6IDUwLCBsYWJlbDogXCJTdGFydGluZyBDcnlzdGFsc1wifSlcbnZpZXdvZiBwTmV3Q3J5c3RhbCA9IElucHV0cy5yYW5nZShbMCwgMC4wMV0sIHtzdGVwOiAwLjAwMDEsIHZhbHVlOiAwLjAwMSwgbGFiZWw6IFwiTmV3IENyeXN0YWwgUHJvYmFiaWxpdHlcIn0pXG5cbnZpZXdvZiBjYW52YXNTaXplID0gSW5wdXRzLnJhbmdlKFs2NCwgNTEyXSwge3N0ZXA6IDY0LCB2YWx1ZTogMjU2LCBsYWJlbDogXCJDYW52YXMgU2l6ZVwifSlcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgY29vcmRpbmF0ZSBjb252ZXJzaW9uXG5mdW5jdGlvbiBjb29yZHNUb0luZGV4KHgsIHksIHdpZHRoKSB7XG4gIHJldHVybiB5ICogd2lkdGggKyB4O1xufVxuXG5mdW5jdGlvbiBpbmRleFRvQ29vcmRzKGluZGV4LCB3aWR0aCkge1xuICByZXR1cm4ge1xuICAgIHg6IGluZGV4ICUgd2lkdGgsXG4gICAgeTogTWF0aC5mbG9vcihpbmRleCAvIHdpZHRoKVxuICB9O1xufVxuXG4vLyBJbml0aWFsaXplIGNyeXN0YWwgc2ltdWxhdGlvbiBkYXRhIHN0cnVjdHVyZXNcbmZ1bmN0aW9uIGluaXRpYWxpemVTaW11bGF0aW9uKHdpZHRoLCBoZWlnaHQsIHN0YXJ0Q3J5c3RhbHMpIHtcbiAgICAvLyBJbml0aWFsaXplIGRhdGEgYXJyYXkgd2l0aCBudWxsc1xuICAgIGNvbnN0IGRhdGEgPSBBcnJheSh3aWR0aCAqIGhlaWdodCkuZmlsbChudWxsKTtcblxuICAgIC8vIFVzZSBhIFNldCB0byB0cmFjayBvY2N1cGllZCBwb3NpdGlvbnMgZm9yIGZhc3RlciBsb29rdXBzXG4gICAgY29uc3Qgb2NjdXBpZWRQb3NpdGlvbnMgPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgZ3Jvd2luZ1BvaW50cyA9IFtdO1xuXG4gICAgLy8gQ3JlYXRlIGluaXRpYWwgY3J5c3RhbHNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXJ0Q3J5c3RhbHM7IGkrKykge1xuICAgICAgICBsZXQgeCwgeSwgaW5kZXg7XG5cbiAgICAgICAgLy8gRW5zdXJlIHdlIGRvbid0IHBsYWNlIGNyeXN0YWxzIG9uIGFscmVhZHkgb2NjdXBpZWQgcG9zaXRpb25zXG4gICAgICAgIGRvIHtcbiAgICAgICAgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpZHRoKTtcbiAgICAgICAgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGhlaWdodCk7XG4gICAgICAgIGluZGV4ID0gY29vcmRzVG9JbmRleCh4LCB5LCB3aWR0aCk7XG4gICAgICAgIH0gd2hpbGUgKG9jY3VwaWVkUG9zaXRpb25zLmhhcyhpbmRleCkpO1xuXG4gICAgICAgIGNvbnN0IGNvbG9yID0gTWF0aC5yYW5kb20oKSAqIDI1NTtcbiAgICAgICAgY29uc3QgY3J5c3RhbCA9IHsgeCwgeSwgY29sb3IgfTtcblxuICAgICAgICBkYXRhW2luZGV4XSA9IGNyeXN0YWw7XG4gICAgICAgIG9jY3VwaWVkUG9zaXRpb25zLmFkZChpbmRleCk7XG4gICAgICAgIGdyb3dpbmdQb2ludHMucHVzaChjcnlzdGFsKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBkYXRhLCBvY2N1cGllZFBvc2l0aW9ucywgZ3Jvd2luZ1BvaW50cyB9O1xufVxuXG4vLyBDcmVhdGUgZGlyZWN0aW9uIHZlY3RvcnMgd2l0aCB3ZWlnaHRzXG5mdW5jdGlvbiBjcmVhdGVEaXJlY3Rpb25zKHdOZWdYLCB3TmVnWSwgd1Bvc1gsIHdQb3NZLCB3TmVnWE5lZ1ksIHdOZWdYUG9zWSwgd1Bvc1hOZWdZLCB3UG9zWFBvc1kpIHtcbiAgICByZXR1cm4gW1xuICAgICAgICB7IGR4OiAtMSwgZHk6IDAsIHc6IHdOZWdYIH0sICAgIC8vIGxlZnRcbiAgICAgICAgeyBkeDogMSwgZHk6IDAsIHc6IHdQb3NYIH0sICAgICAvLyByaWdodFxuICAgICAgICB7IGR4OiAwLCBkeTogLTEsIHc6IHdQb3NZIH0sICAgIC8vIHVwXG4gICAgICAgIHsgZHg6IDAsIGR5OiAxLCB3OiB3TmVnWSB9LCAgICAgLy8gZG93blxuICAgICAgICB7IGR4OiAtMSwgZHk6IC0xLCB3OiB3TmVnWE5lZ1kgfSwgLy8gdG9wLWxlZnRcbiAgICAgICAgeyBkeDogLTEsIGR5OiAxLCB3OiB3TmVnWFBvc1kgfSwgIC8vIGJvdHRvbS1sZWZ0XG4gICAgICAgIHsgZHg6IDEsIGR5OiAtMSwgdzogd1Bvc1hOZWdZIH0sICAvLyB0b3AtcmlnaHRcbiAgICAgICAgeyBkeDogMSwgZHk6IDEsIHc6IHdQb3NYUG9zWSB9ICAgIC8vIGJvdHRvbS1yaWdodFxuICAgIF07XG59XG5cbi8vIEF0dGVtcHQgdG8gY3JlYXRlIGEgbmV3IHJhbmRvbSBjcnlzdGFsXG5mdW5jdGlvbiB0cnlDcmVhdGVSYW5kb21DcnlzdGFsKGRhdGEsIG9jY3VwaWVkUG9zaXRpb25zLCBxdWV1ZSwgd2lkdGgsIGhlaWdodCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgICAgLy8gUmFuZG9tbHkgc2VsZWN0IGEgcG9zaXRpb25cbiAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkYXRhLmxlbmd0aCk7XG4gICAgICAgIGlmIChvY2N1cGllZFBvc2l0aW9ucy5oYXMocmFuZG9tSW5kZXgpKSBjb250aW51ZTtcblxuICAgICAgICBjb25zdCB7IHg6IG5YLCB5OiBuWSB9ID0gaW5kZXhUb0Nvb3JkcyhyYW5kb21JbmRleCwgd2lkdGgpO1xuICAgICAgICBjb25zdCBuZXdDcnlzdGFsID0ge1xuICAgICAgICBjb2xvcjogTWF0aC5yYW5kb20oKSAqIDI1NSxcbiAgICAgICAgeDogblgsXG4gICAgICAgIHk6IG5ZXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVXBkYXRlIGRhdGEgc3RydWN0dXJlXG4gICAgICAgIGNvbnN0IGluZGV4ID0gY29vcmRzVG9JbmRleChuWCwgblksIHdpZHRoKTtcbiAgICAgICAgZGF0YVtpbmRleF0gPSBuZXdDcnlzdGFsO1xuICAgICAgICBvY2N1cGllZFBvc2l0aW9ucy5hZGQoaW5kZXgpO1xuICAgICAgICBxdWV1ZS5wdXNoKG5ld0NyeXN0YWwpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBQcm9jZXNzIG9uZSBjcnlzdGFsJ3MgZ3Jvd3RoXG5mdW5jdGlvbiBwcm9jZXNzQ3J5c3RhbEdyb3d0aChjcnlzdGFsLCBkaXJlY3Rpb25zLCBkYXRhLCBvY2N1cGllZFBvc2l0aW9ucywgcXVldWUsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjb25zdCB7IHgsIHksIGNvbG9yIH0gPSBjcnlzdGFsO1xuXG4gICAgLy8gU2h1ZmZsZSBkaXJlY3Rpb25zIG9uY2UgcGVyIGNyeXN0YWxcbiAgICBjb25zdCBzaHVmZmxlZERpcnMgPSBbLi4uZGlyZWN0aW9uc10uc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcblxuICAgIGxldCBoYXNGb3VuZCA9IGZhbHNlO1xuICAgIGxldCBoYXNTa2lwcGVkID0gZmFsc2U7XG5cbiAgICBmb3IgKGNvbnN0IHsgZHgsIGR5LCB3IH0gb2Ygc2h1ZmZsZWREaXJzKSB7XG4gICAgICAgIGNvbnN0IG5YID0geCArIGR4O1xuICAgICAgICBjb25zdCBuWSA9IHkgKyBkeTtcblxuICAgICAgICAvLyBCb3VuZGFyeSBjaGVja1xuICAgICAgICBpZiAoblggPCAwIHx8IG5YID49IHdpZHRoIHx8IG5ZIDwgMCB8fCBuWSA+PSBoZWlnaHQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbmRleCA9IGNvb3Jkc1RvSW5kZXgoblgsIG5ZLCB3aWR0aCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcG9zaXRpb24gaXMgYWxyZWFkeSBvY2N1cGllZFxuICAgICAgICBpZiAob2NjdXBpZWRQb3NpdGlvbnMuaGFzKGluZGV4KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gdykge1xuICAgICAgICBoYXNTa2lwcGVkID0gdHJ1ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgbmV3IGNyeXN0YWxcbiAgICAgICAgY29uc3QgbmV3Q3J5c3RhbCA9IHsgeDogblgsIHk6IG5ZLCBjb2xvciB9O1xuXG4gICAgICAgIC8vIFVwZGF0ZSBkYXRhIHN0cnVjdHVyZXNcbiAgICAgICAgZGF0YVtpbmRleF0gPSBuZXdDcnlzdGFsO1xuICAgICAgICBvY2N1cGllZFBvc2l0aW9ucy5hZGQoaW5kZXgpO1xuICAgICAgICBxdWV1ZS5wdXNoKGNyeXN0YWwpOyAgICAvLyBBZGQgb3JpZ2luYWwgY3J5c3RhbCBiYWNrIHRvIHF1ZXVlXG4gICAgICAgIHF1ZXVlLnB1c2gobmV3Q3J5c3RhbCk7IC8vIEFkZCBuZXcgY3J5c3RhbCB0byBxdWV1ZVxuXG4gICAgICAgIGhhc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgaGFzRm91bmQsIGhhc1NraXBwZWQgfTtcbn1cblxuLy8gUmVuZGVyIGNyeXN0YWwgZGF0YSB0byBjYW52YXNcbmZ1bmN0aW9uIHJlbmRlckNyeXN0YWxzKGRhdGEsIG9jY3VwaWVkUG9zaXRpb25zLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgY29uc3QgY2FudmFzID0gRE9NLmNhbnZhcyh3aWR0aCwgaGVpZ2h0KTtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgLy8gQ3JlYXRlIGltYWdlIGRhdGFcbiAgICBjb25zdCBpbWdEYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KTtcbiAgICBjb25zdCBidWZmZXIgPSBpbWdEYXRhLmRhdGE7XG5cbiAgICAvLyBGaWxsIHdpdGggZGVmYXVsdCBjb2xvciBmaXJzdCAocmVkIGZvciBlbXB0eSBzcGFjZXMpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aWR0aCAqIGhlaWdodDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGkgKiA0O1xuICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IDI1NTsgICAgIC8vIFJcbiAgICAgICAgYnVmZmVyW29mZnNldCArIDFdID0gMDsgICAvLyBHXG4gICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAyXSA9IDA7ICAgLy8gQlxuICAgICAgICBidWZmZXJbb2Zmc2V0ICsgM10gPSAyNTU7IC8vIEFcbiAgICB9XG5cbiAgICAvLyBPbmx5IHByb2Nlc3Mgb2NjdXBpZWQgcG9zaXRpb25zXG4gICAgZm9yIChjb25zdCBpbmRleCBvZiBvY2N1cGllZFBvc2l0aW9ucykge1xuICAgICAgICBjb25zdCBjcnlzdGFsID0gZGF0YVtpbmRleF07XG4gICAgICAgIGNvbnN0IGNvbG9yID0gY3J5c3RhbC5jb2xvcjtcbiAgICAgICAgY29uc3Qgc2hpZnRlZCA9IE1hdGgubWluKDI1NSwgY29sb3IgKyAxMCk7XG5cbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaW5kZXggKiA0O1xuICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IGNvbG9yOyAgICAgLy8gUlxuICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSBzaGlmdGVkOyAvLyBHXG4gICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAyXSA9IHNoaWZ0ZWQ7IC8vIEJcbiAgICAgICAgLy8gQWxwaGEgYWxyZWFkeSBzZXQgdG8gMjU1XG4gICAgfVxuXG4gICAgY3R4LnB1dEltYWdlRGF0YShpbWdEYXRhLCAwLCAwKTtcbiAgICByZXR1cm4gY2FudmFzO1xufVxuXG4vLyBNYWluIHNpbXVsYXRpb24gZnVuY3Rpb25cbmZ1bmN0aW9uIGNyeXN0YWxHcm93dGgod05lZ1gsIHdOZWdZLCB3UG9zWCwgd1Bvc1ksIHdOZWdYTmVnWSwgd05lZ1hQb3NZLCB3UG9zWE5lZ1ksIHdQb3NYUG9zWSxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRDcnlzdGFscywgcE5ld0NyeXN0YWwsIGNhbnZhc1NpemUpIHtcbiAgICAvLyBDYW52YXMgZGltZW5zaW9uc1xuICAgIGNvbnN0IHdpZHRoID0gY2FudmFzU2l6ZTtcbiAgICBjb25zdCBoZWlnaHQgPSBjYW52YXNTaXplO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBzaW11bGF0aW9uXG4gICAgY29uc3QgeyBkYXRhLCBvY2N1cGllZFBvc2l0aW9ucywgZ3Jvd2luZ1BvaW50cyB9ID0gaW5pdGlhbGl6ZVNpbXVsYXRpb24od2lkdGgsIGhlaWdodCwgc3RhcnRDcnlzdGFscyk7XG5cbiAgICAvLyBDcmVhdGUgZGlyZWN0aW9uIHZlY3RvcnNcbiAgICBjb25zdCBkaXJlY3Rpb25zID0gY3JlYXRlRGlyZWN0aW9ucyh3TmVnWCwgd05lZ1ksIHdQb3NYLCB3UG9zWSwgd05lZ1hOZWdZLCB3TmVnWFBvc1ksIHdQb3NYTmVnWSwgd1Bvc1hQb3NZKTtcblxuICAgIC8vIFByb2Nlc3MgZ3Jvd2luZyBwb2ludHMgdXNpbmcgYSBxdWV1ZVxuICAgIGNvbnN0IHF1ZXVlID0gWy4uLmdyb3dpbmdQb2ludHNdO1xuICAgIGdyb3dpbmdQb2ludHMubGVuZ3RoID0gMDsgLy8gQ2xlYXIgdGhlIG9yaWdpbmFsIGFycmF5XG5cbiAgICAvLyBHcm93dGggYWxnb3JpdGhtXG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDAgfHwgZGF0YS5zb21lKGNyeXN0YWwgPT4gY3J5c3RhbCA9PT0gbnVsbCkpIHtcbiAgICAgICAgLy8gVHJ5IHRvIGNyZWF0ZSBhIG5ldyByYW5kb20gY3J5c3RhbFxuICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IHBOZXdDcnlzdGFsKSB7XG4gICAgICAgIGlmICh0cnlDcmVhdGVSYW5kb21DcnlzdGFsKGRhdGEsIG9jY3VwaWVkUG9zaXRpb25zLCBxdWV1ZSwgd2lkdGgsIGhlaWdodCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBObyBtb3JlIGNyeXN0YWxzIHRvIGdyb3dcbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMCkgYnJlYWs7XG5cbiAgICAgICAgLy8gR2V0IG5leHQgY3J5c3RhbCBmcm9tIHF1ZXVlXG4gICAgICAgIGNvbnN0IGNyeXN0YWwgPSBxdWV1ZS5zaGlmdCgpO1xuXG4gICAgICAgIC8vIFByb2Nlc3MgdGhpcyBjcnlzdGFsJ3MgZ3Jvd3RoXG4gICAgICAgIGNvbnN0IHsgaGFzRm91bmQsIGhhc1NraXBwZWQgfSA9IHByb2Nlc3NDcnlzdGFsR3Jvd3RoKFxuICAgICAgICAgICAgY3J5c3RhbCxcbiAgICAgICAgICAgIGRpcmVjdGlvbnMsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgb2NjdXBpZWRQb3NpdGlvbnMsXG4gICAgICAgICAgICBxdWV1ZSxcbiAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gSWYgd2Ugc2tpcHBlZCBzb21lIGRpcmVjdGlvbnMgYnV0IGRpZG4ndCBncm93LCBnaXZlIHRoaXMgY3J5c3RhbCBhbm90aGVyIGNoYW5jZSBsYXRlclxuICAgICAgICBpZiAoIWhhc0ZvdW5kICYmIGhhc1NraXBwZWQpIHtcbiAgICAgICAgcXVldWUucHVzaChjcnlzdGFsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJlbmRlciB0aGUgcmVzdWx0XG4gICAgcmV0dXJuIHJlbmRlckNyeXN0YWxzKGRhdGEsIG9jY3VwaWVkUG9zaXRpb25zLCB3aWR0aCwgaGVpZ2h0KTtcbn1cblxuLy8gUnVuIHRoZSBzaW11bGF0aW9uIHdpdGggdGhlIGN1cnJlbnQgcGFyYW1ldGVyIHZhbHVlc1xuY3J5c3RhbEdyb3d0aCh3TmVnWCwgd05lZ1ksIHdQb3NYLCB3UG9zWSwgd05lZ1hOZWdZLCB3TmVnWFBvc1ksIHdQb3NYTmVnWSwgd1Bvc1hQb3NZLFxuICAgIHN0YXJ0Q3J5c3RhbHMsIHBOZXdDcnlzdGFsLCBjYW52YXNTaXplKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCd3TmVnWCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCd3TmVnWScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCd3UG9zWCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCd3UG9zWScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCd3TmVnWE5lZ1knKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnd05lZ1hQb3NZJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3dQb3NYTmVnWScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCd3UG9zWFBvc1knKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc3RhcnRDcnlzdGFscycpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdwTmV3Q3J5c3RhbCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdjYW52YXNTaXplJykifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../runde_1/aufgabe_2";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/sshcrack\.github\.io\/bw-inf23\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>